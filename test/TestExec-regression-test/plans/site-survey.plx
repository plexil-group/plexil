<?xml version="1.0" encoding="UTF-8"?>

<!--
* Copyright (c) 2006-2014, Universities Space Research Association (USRA).
*  All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*     * Redistributions of source code must retain the above copyright
*       notice, this list of conditions and the following disclaimer.
*     * Redistributions in binary form must reproduce the above copyright
*       notice, this list of conditions and the following disclaimer in the
*       documentation and/or other materials provided with the distribution.
*     * Neither the name of the Universities Space Research Association nor the
*       names of its contributors may be used to endorse or promote products
*       derived from this software without specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY USRA ``AS IS'' AND ANY EXPRESS OR IMPLIED
* WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
* DISCLAIMED. IN NO EVENT SHALL USRA BE LIABLE FOR ANY DIRECT, INDIRECT,
* INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
* BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
* OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
* ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
* TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
* USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->

<!-- Generated by PlexiLisp 2.0.5 on Thu Jan 24 14:55:39 2008 -->
<PlexilPlan>
  <Node NodeType="NodeList" >
    <NodeId>SiteSurveyWithEOF</NodeId>
    <EndCondition>
      <OR>
        <EQInternal>
          <NodeStateVariable>
            <NodeId>SignalEndOfPlan</NodeId>
          </NodeStateVariable>
          <NodeStateValue>FINISHED</NodeStateValue>
        </EQInternal>
        <EQInternal>
          <NodeStateVariable>
            <NodeId>SendAbortUpdate</NodeId>
          </NodeStateVariable>
          <NodeStateValue>FINISHED</NodeStateValue>
        </EQInternal>
        <EQBoolean>
          <BooleanValue>1</BooleanValue>
          <BooleanVariable>abort_due_to_exception</BooleanVariable>
        </EQBoolean>
      </OR>
    </EndCondition>
    <VariableDeclarations>
      <DeclareVariable>
        <Name>task_type</Name>
        <Type>Integer</Type>
      </DeclareVariable>
      <DeclareVariable>
        <Name>is_aborted</Name>
        <Type>Boolean</Type>
        <InitialValue>
          <BooleanValue>false</BooleanValue>
        </InitialValue>
      </DeclareVariable>
      <DeclareVariable>
        <Name>abort_due_to_exception</Name>
        <Type>Boolean</Type>
        <InitialValue>
          <BooleanValue>false</BooleanValue>
        </InitialValue>
      </DeclareVariable>
      <DeclareVariable>
        <Name>waypt_id</Name>
        <Type>Integer</Type>
      </DeclareVariable>
    </VariableDeclarations>
    <NodeBody>
      <NodeList>
        <Node NodeType="NodeList" >
          <NodeId>SiteSurveyWrapper</NodeId>
          <VariableDeclarations>
            <DeclareVariable>
              <Name>task_type</Name>
              <Type>Integer</Type>
            </DeclareVariable>
            <DeclareVariable>
              <Name>is_paused</Name>
              <Type>Boolean</Type>
              <InitialValue>
                <BooleanValue>false</BooleanValue>
              </InitialValue>
            </DeclareVariable>
          </VariableDeclarations>
          <EndCondition>
            <OR>
              <EQNumeric>
                <IntegerValue>0</IntegerValue>
                <IntegerVariable>task_type</IntegerVariable>
              </EQNumeric>
              <EQBoolean>
                <BooleanValue>1</BooleanValue>
                <BooleanVariable>is_aborted</BooleanVariable>
              </EQBoolean>
              <EQBoolean>
                <BooleanValue>1</BooleanValue>
                <BooleanVariable>abort_due_to_exception</BooleanVariable>
              </EQBoolean>
            </OR>
          </EndCondition>
          <NodeBody>
            <NodeList>
              <Node NodeType="NodeList" >
                <NodeId>SiteSurvey</NodeId>
                <VariableDeclarations>
                  <DeclareVariable>
                    <Name>task_result_str</Name>
                    <Type>String</Type>
                  </DeclareVariable>
                  <DeclareVariable>
                    <Name>cmd_return_val</Name>
                    <Type>Integer</Type>
                  </DeclareVariable>
                  <DeclareVariable>
                    <Name>cmd_name</Name>
                    <Type>String</Type>
                    <InitialValue>
                      <StringValue>nil</StringValue>
                    </InitialValue>
                  </DeclareVariable>
                </VariableDeclarations>
                <RepeatCondition>
                  <NENumeric>
                    <IntegerValue>0</IntegerValue>
                    <IntegerVariable>task_type</IntegerVariable>
                  </NENumeric>
                </RepeatCondition>
                <NodeBody>
                  <NodeList>
                    <Node NodeType="NodeList" >
                      <NodeId>Loop</NodeId>
                      <StartCondition>
                        <EQBoolean>
                          <BooleanValue>0</BooleanValue>
                          <BooleanVariable>is_paused</BooleanVariable>
                        </EQBoolean>
                      </StartCondition>
                      <EndCondition>
                        <EQInternal>
                          <NodeStateVariable>
                            <NodeId>CheckIfAbortPlan</NodeId>
                          </NodeStateVariable>
                          <NodeStateValue>FINISHED</NodeStateValue>
                        </EQInternal>
                      </EndCondition>
                      <NodeBody>
                        <NodeList>
                          <Node NodeType="Command" >
                            <NodeId>RequestNextWaypt</NodeId>
                            <VariableDeclarations>
                              <DeclareVariable>
                                <Name>ret_val</Name>
                                <Type>Integer</Type>
                              </DeclareVariable>
                            </VariableDeclarations>
                            <StartCondition>
                              <EQBoolean>
                                <BooleanValue>0</BooleanValue>
                                <BooleanVariable>is_paused</BooleanVariable>
                              </EQBoolean>
                            </StartCondition>
                            <PostCondition>
                              <EQNumeric>
                                <IntegerValue>0</IntegerValue>
                                <IntegerVariable>ret_val</IntegerVariable>
                              </EQNumeric>
                            </PostCondition>
                            <EndCondition>
                              <IsKnown>
                                <IntegerVariable>ret_val</IntegerVariable>
                              </IsKnown>
                            </EndCondition>
                            <NodeBody>
                              <Command>
                                <IntegerVariable>ret_val</IntegerVariable>
                                <Name>
                                  <StringValue>get_next_inspection_point</StringValue>
                                </Name>
                              </Command>
                            </NodeBody>
                          </Node>
                          <Node NodeType="Assignment" >
                            <NodeId>SetWaypointRequestFailed</NodeId>
                            <StartCondition>
                              <EQInternal>
                                <NodeOutcomeVariable>
                                  <NodeId>RequestNextWaypt</NodeId>
                                </NodeOutcomeVariable>
                                <NodeOutcomeValue>FAILURE</NodeOutcomeValue>
                              </EQInternal>
                            </StartCondition>
                            <NodeBody>
                              <Assignment>
                                <StringVariable>cmd_name</StringVariable>
                                <StringRHS>
                                  <StringValue>get_next_inspection_point</StringValue>
                                </StringRHS>
                              </Assignment>
                            </NodeBody>
                          </Node>
                          <Node NodeType="NodeList" >
                            <NodeId>GetAndProcessWaypoint</NodeId>
                            <VariableDeclarations>
                              <DeclareVariable>
                                <Name>waypt_name</Name>
                                <Type>String</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_frame</Name>
                                <Type>String</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_x</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_y</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_z</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_a</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_is_directional</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_tolerance</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_heading_tolerance</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_hinted_speed</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                              <DeclareVariable>
                                <Name>waypt_timeout</Name>
                                <Type>Real</Type>
                              </DeclareVariable>
                            </VariableDeclarations>
                            <StartCondition>
                              <AND>
                                <EQBoolean>
                                  <BooleanValue>0</BooleanValue>
                                  <BooleanVariable>is_paused</BooleanVariable>
                                </EQBoolean>
                                <EQInternal>
                                  <NodeStateVariable>
                                    <NodeId>RequestNextWaypt</NodeId>
                                  </NodeStateVariable>
                                  <NodeStateValue>FINISHED</NodeStateValue>
                                </EQInternal>
                              </AND>
                            </StartCondition>
                            <PreCondition>
                              <EQInternal>
                                <NodeOutcomeVariable>
                                  <NodeId>RequestNextWaypt</NodeId>
                                </NodeOutcomeVariable>
                                <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                              </EQInternal>
                            </PreCondition>
                            <InvariantCondition>
                              <EQBoolean>
                                <BooleanValue>0</BooleanValue>
                                <BooleanVariable>is_paused</BooleanVariable>
                              </EQBoolean>
                            </InvariantCondition>
                            <EndCondition>
                              <OR>
                                <EQInternal>
                                  <NodeOutcomeVariable>
                                    <NodeId>GetNewWaypt</NodeId>
                                  </NodeOutcomeVariable>
                                  <NodeOutcomeValue>FAILURE</NodeOutcomeValue>
                                </EQInternal>
                                <EQInternal>
                                  <NodeStateVariable>
                                    <NodeId>DriveAndAcquire</NodeId>
                                  </NodeStateVariable>
                                  <NodeStateValue>FINISHED</NodeStateValue>
                                </EQInternal>
                              </OR>
                            </EndCondition>
                            <NodeBody>
                              <NodeList>
                                <Node NodeType="NodeList" >
                                  <NodeId>GetNewWaypt</NodeId>
                                  <PostCondition>
                                    <AND>
                                      <EQInternal>
                                        <NodeOutcomeVariable>
                                          <NodeId>Get_x</NodeId>
                                        </NodeOutcomeVariable>
                                        <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                      </EQInternal>
                                      <EQInternal>
                                        <NodeOutcomeVariable>
                                          <NodeId>Get_y</NodeId>
                                        </NodeOutcomeVariable>
                                        <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                      </EQInternal>
                                      <EQInternal>
                                        <NodeOutcomeVariable>
                                          <NodeId>Get_task_type</NodeId>
                                        </NodeOutcomeVariable>
                                        <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                      </EQInternal>
                                      <EQInternal>
                                        <NodeOutcomeVariable>
                                          <NodeId>Get_task_id</NodeId>
                                        </NodeOutcomeVariable>
                                        <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                      </EQInternal>
                                    </AND>
                                  </PostCondition>
                                  <NodeBody>
                                    <NodeList>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_name</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <StringVariable>waypt_name</StringVariable>
                                            <StringRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>name</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </StringRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_frame</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <StringVariable>waypt_frame</StringVariable>
                                            <StringRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>frame</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </StringRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_x</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_x</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>waypoint_x</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_y</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_y</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>waypoint_y</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_z</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_z</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>waypoint_z</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_a</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_a</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>waypoint_a</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_dir</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_is_directional</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>isDirectional</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_tolerance</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_tolerance</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>tolerance</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_heading_tolerance</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_heading_tolerance</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>headingTolerance</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_hinted_speed</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_hinted_speed</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>hintedSpeed</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_task_type</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <IntegerVariable>task_type</IntegerVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>inspect_waypoint</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_task_id</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <IntegerVariable>waypt_id</IntegerVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>task_id</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="Assignment" >
                                        <NodeId>Get_timeout</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <RealVariable>waypt_timeout</RealVariable>
                                            <NumericRHS>
                                              <LookupNow>
                                                <Name>
                                                  <StringValue>timeout</StringValue>
                                                </Name>
                                              </LookupNow>
                                            </NumericRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                    </NodeList>
                                  </NodeBody>
                                </Node>
                                <Node NodeType="Assignment" >
                                  <NodeId>Cmd_Resest1</NodeId>
                                  <NodeBody>
                                    <Assignment>
                                      <IntegerVariable>cmd_return_val</IntegerVariable>
                                      <NumericRHS>
                                        <IntegerValue>-1000</IntegerValue>
                                      </NumericRHS>
                                    </Assignment>
                                  </NodeBody>
                                </Node>
                                <Node NodeType="NodeList" >
                                  <NodeId>DriveAndAcquire</NodeId>
                                  <StartCondition>
                                    <EQInternal>
                                      <NodeStateVariable>
                                        <NodeId>GetNewWaypt</NodeId>
                                      </NodeStateVariable>
                                      <NodeStateValue>FINISHED</NodeStateValue>
                                    </EQInternal>
                                  </StartCondition>
                                  <PreCondition>
                                    <EQInternal>
                                      <NodeOutcomeVariable>
                                        <NodeId>GetNewWaypt</NodeId>
                                      </NodeOutcomeVariable>
                                      <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                    </EQInternal>
                                  </PreCondition>
                                  <NodeBody>
                                    <NodeList>
                                      <Node NodeType="NodeList" >
                                        <NodeId>plexilisp_If_8</NodeId>
                                        <VariableDeclarations>
                                          <DeclareVariable>
                                            <Name>test</Name>
                                            <Type>Boolean</Type>
                                          </DeclareVariable>
                                        </VariableDeclarations>
                                        <NodeBody>
                                          <NodeList>
                                            <Node NodeType="Assignment" >
                                              <NodeId>plexilisp_IfSetup_10</NodeId>
                                              <NodeBody>
                                                <Assignment>
                                                  <BooleanVariable>test</BooleanVariable>
                                                  <BooleanRHS>
                                                    <NOT>
                                                      <EQNumeric>
                                                        <IntegerValue>0</IntegerValue>
                                                        <IntegerVariable>task_type</IntegerVariable>
                                                      </EQNumeric>
                                                    </NOT>
                                                  </BooleanRHS>
                                                </Assignment>
                                              </NodeBody>
                                            </Node>
                                            <Node NodeType="NodeList" >
                                              <NodeId>plexilisp_IfBody_9</NodeId>
                                              <StartCondition>
                                                <EQInternal>
                                                  <NodeStateVariable>
                                                    <NodeId>plexilisp_IfSetup_10</NodeId>
                                                  </NodeStateVariable>
                                                  <NodeStateValue>FINISHED</NodeStateValue>
                                                </EQInternal>
                                              </StartCondition>
                                              <EndCondition>
                                                <OR>
                                                  <NOT>
                                                    <BooleanVariable>test</BooleanVariable>
                                                  </NOT>
                                                  <EQInternal>
                                                    <NodeStateVariable>
                                                      <NodeId>plexilisp_IfTrueCase_11</NodeId>
                                                    </NodeStateVariable>
                                                    <NodeStateValue>FINISHED</NodeStateValue>
                                                  </EQInternal>
                                                </OR>
                                              </EndCondition>
                                              <NodeBody>
                                                <NodeList>
                                                  <Node NodeType="NodeList" >
                                                    <NodeId>plexilisp_IfTrueCase_11</NodeId>
                                                    <StartCondition>
                                                      <BooleanVariable>test</BooleanVariable>
                                                    </StartCondition>
                                                    <NodeBody>
                                                      <NodeList>
                                                        <Node NodeType="NodeList" >
                                                          <NodeId>ProcessWaypoint</NodeId>
                                                          <NodeBody>
                                                            <NodeList>
                                                              <Node NodeType="NodeList" >
                                                                <NodeId>plexilisp_Sequence_7</NodeId>
                                                                <NodeBody>
                                                                  <NodeList>
                                                                    <Node NodeType="Command" >
                                                                      <NodeId>DriveToWaypoint</NodeId>
                                                                      <PostCondition>
                                                                        <EQNumeric>
                                                                          <IntegerValue>0</IntegerValue>
                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                        </EQNumeric>
                                                                      </PostCondition>
                                                                      <InvariantCondition>
                                                                        <OR>
                                                                          <EQNumeric>
                                                                            <IntegerValue>-1000</IntegerValue>
                                                                            <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          </EQNumeric>
                                                                          <EQNumeric>
                                                                            <IntegerValue>0</IntegerValue>
                                                                            <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          </EQNumeric>
                                                                          <EQNumeric>
                                                                            <IntegerValue>2</IntegerValue>
                                                                            <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          </EQNumeric>
                                                                          <EQNumeric>
                                                                            <IntegerValue>3</IntegerValue>
                                                                            <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          </EQNumeric>
                                                                        </OR>
                                                                      </InvariantCondition>
                                                                      <EndCondition>
                                                                        <OR>
                                                                          <NENumeric>
                                                                            <IntegerValue>-1000</IntegerValue>
                                                                            <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          </NENumeric>
                                                                          <EQBoolean>
                                                                            <BooleanValue>1</BooleanValue>
                                                                            <BooleanVariable>is_aborted</BooleanVariable>
                                                                          </EQBoolean>
                                                                        </OR>
                                                                      </EndCondition>
                                                                      <NodeBody>
                                                                        <Command>
                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                          <Name>
                                                                            <StringValue>move_to_waypoint</StringValue>
                                                                          </Name>
                                                                          <Arguments>
                                                                            <StringVariable>waypt_name</StringVariable>
                                                                            <StringVariable>waypt_frame</StringVariable>
                                                                            <RealVariable>waypt_x</RealVariable>
                                                                            <RealVariable>waypt_y</RealVariable>
                                                                            <RealVariable>waypt_z</RealVariable>
                                                                            <RealVariable>waypt_a</RealVariable>
                                                                            <RealVariable>waypt_is_directional</RealVariable>
                                                                            <RealVariable>waypt_tolerance</RealVariable>
                                                                            <RealVariable>waypt_heading_tolerance</RealVariable>
                                                                            <RealVariable>waypt_hinted_speed</RealVariable>
                                                                          </Arguments>
                                                                        </Command>
                                                                      </NodeBody>
                                                                    </Node>
                                                                    <Node NodeType="Assignment" >
                                                                      <StartCondition>
                                                                        <EQInternal>
                                                                          <NodeStateVariable>
                                                                            <NodeId>DriveToWaypoint</NodeId>
                                                                          </NodeStateVariable>
                                                                          <NodeStateValue>FINISHED</NodeStateValue>
                                                                        </EQInternal>
                                                                      </StartCondition>
                                                                      <NodeId>SetNameToDrive</NodeId>
                                                                      <NodeBody>
                                                                        <Assignment>
                                                                          <StringVariable>cmd_name</StringVariable>
                                                                          <StringRHS>
                                                                            <StringValue>drive</StringValue>
                                                                          </StringRHS>
                                                                        </Assignment>
                                                                      </NodeBody>
                                                                    </Node>
                                                                    <Node NodeType="NodeList" >
                                                                      <StartCondition>
                                                                        <EQInternal>
                                                                          <NodeStateVariable>
                                                                            <NodeId>SetNameToDrive</NodeId>
                                                                          </NodeStateVariable>
                                                                          <NodeStateValue>FINISHED</NodeStateValue>
                                                                        </EQInternal>
                                                                      </StartCondition>
                                                                      <NodeId>WrapperNode</NodeId>
                                                                      <PreCondition>
                                                                        <EQInternal>
                                                                          <NodeOutcomeVariable>
                                                                            <NodeId>DriveToWaypoint</NodeId>
                                                                          </NodeOutcomeVariable>
                                                                          <NodeOutcomeValue>SUCCESS</NodeOutcomeValue>
                                                                        </EQInternal>
                                                                      </PreCondition>
                                                                      <NodeBody>
                                                                        <NodeList>
                                                                          <Node NodeType="NodeList" >
                                                                            <NodeId>plexilisp_If_2</NodeId>
                                                                            <VariableDeclarations>
                                                                              <DeclareVariable>
                                                                                <Name>test</Name>
                                                                                <Type>Boolean</Type>
                                                                              </DeclareVariable>
                                                                            </VariableDeclarations>
                                                                            <NodeBody>
                                                                              <NodeList>
                                                                                <Node NodeType="Assignment" >
                                                                                  <NodeId>plexilisp_IfSetup_4</NodeId>
                                                                                  <NodeBody>
                                                                                    <Assignment>
                                                                                      <BooleanVariable>test</BooleanVariable>
                                                                                      <BooleanRHS>
                                                                                        <NOT>
                                                                                          <EQNumeric>
                                                                                            <IntegerValue>1</IntegerValue>
                                                                                            <IntegerVariable>task_type</IntegerVariable>
                                                                                          </EQNumeric>
                                                                                        </NOT>
                                                                                      </BooleanRHS>
                                                                                    </Assignment>
                                                                                  </NodeBody>
                                                                                </Node>
                                                                                <Node NodeType="NodeList" >
                                                                                  <NodeId>plexilisp_IfBody_3</NodeId>
                                                                                  <StartCondition>
                                                                                    <EQInternal>
                                                                                      <NodeStateVariable>
                                                                                        <NodeId>plexilisp_IfSetup_4</NodeId>
                                                                                      </NodeStateVariable>
                                                                                      <NodeStateValue>FINISHED</NodeStateValue>
                                                                                    </EQInternal>
                                                                                  </StartCondition>
                                                                                  <EndCondition>
                                                                                    <OR>
                                                                                      <NOT>
                                                                                        <BooleanVariable>test</BooleanVariable>
                                                                                      </NOT>
                                                                                      <EQInternal>
                                                                                        <NodeStateVariable>
                                                                                          <NodeId>plexilisp_IfTrueCase_5</NodeId>
                                                                                        </NodeStateVariable>
                                                                                        <NodeStateValue>FINISHED</NodeStateValue>
                                                                                      </EQInternal>
                                                                                    </OR>
                                                                                  </EndCondition>
                                                                                  <NodeBody>
                                                                                    <NodeList>
                                                                                      <Node NodeType="NodeList" >
                                                                                        <NodeId>plexilisp_IfTrueCase_5</NodeId>
                                                                                        <StartCondition>
                                                                                          <BooleanVariable>test</BooleanVariable>
                                                                                        </StartCondition>
                                                                                        <NodeBody>
                                                                                          <NodeList>
                                                                                            <Node NodeType="NodeList" >
                                                                                              <NodeId>plexilisp_Sequence_1</NodeId>
                                                                                              <NodeBody>
                                                                                                <NodeList>
                                                                                                  <Node NodeType="Assignment" >
                                                                                                    <NodeId>Cmd_Resest2</NodeId>
                                                                                                    <NodeBody>
                                                                                                      <Assignment>
                                                                                                        <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        <NumericRHS>
                                                                                                          <IntegerValue>-1000</IntegerValue>
                                                                                                        </NumericRHS>
                                                                                                      </Assignment>
                                                                                                    </NodeBody>
                                                                                                  </Node>
                                                                                                  <Node NodeType="Command" >
                                                                                                    <StartCondition>
                                                                                                      <EQInternal>
                                                                                                        <NodeStateVariable>
                                                                                                          <NodeId>Cmd_Resest2</NodeId>
                                                                                                        </NodeStateVariable>
                                                                                                        <NodeStateValue>FINISHED</NodeStateValue>
                                                                                                      </EQInternal>
                                                                                                    </StartCondition>
                                                                                                    <NodeId>TakeSample</NodeId>
                                                                                                    <PostCondition>
                                                                                                      <EQNumeric>
                                                                                                        <IntegerValue>0</IntegerValue>
                                                                                                        <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                      </EQNumeric>
                                                                                                    </PostCondition>
                                                                                                    <InvariantCondition>
                                                                                                      <OR>
                                                                                                        <EQNumeric>
                                                                                                          <IntegerValue>-1000</IntegerValue>
                                                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        </EQNumeric>
                                                                                                        <EQNumeric>
                                                                                                          <IntegerValue>0</IntegerValue>
                                                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        </EQNumeric>
                                                                                                        <EQNumeric>
                                                                                                          <IntegerValue>3</IntegerValue>
                                                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        </EQNumeric>
                                                                                                        <EQNumeric>
                                                                                                          <IntegerValue>2</IntegerValue>
                                                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        </EQNumeric>
                                                                                                      </OR>
                                                                                                    </InvariantCondition>
                                                                                                    <EndCondition>
                                                                                                      <OR>
                                                                                                        <NENumeric>
                                                                                                          <IntegerValue>-1000</IntegerValue>
                                                                                                          <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        </NENumeric>
                                                                                                        <EQBoolean>
                                                                                                          <BooleanValue>1</BooleanValue>
                                                                                                          <BooleanVariable>is_aborted</BooleanVariable>
                                                                                                        </EQBoolean>
                                                                                                      </OR>
                                                                                                    </EndCondition>
                                                                                                    <NodeBody>
                                                                                                      <Command>
                                                                                                        <IntegerVariable>cmd_return_val</IntegerVariable>
                                                                                                        <Name>
                                                                                                          <StringValue>acquire</StringValue>
                                                                                                        </Name>
                                                                                                      </Command>
                                                                                                    </NodeBody>
                                                                                                  </Node>
                                                                                                  <Node NodeType="Assignment" >
                                                                                                    <StartCondition>
                                                                                                      <EQInternal>
                                                                                                        <NodeStateVariable>
                                                                                                          <NodeId>TakeSample</NodeId>
                                                                                                        </NodeStateVariable>
                                                                                                        <NodeStateValue>FINISHED</NodeStateValue>
                                                                                                      </EQInternal>
                                                                                                    </StartCondition>
                                                                                                    <NodeId>SetNameToAcquire</NodeId>
                                                                                                    <NodeBody>
                                                                                                      <Assignment>
                                                                                                        <StringVariable>cmd_name</StringVariable>
                                                                                                        <StringRHS>
                                                                                                          <StringValue>acquire</StringValue>
                                                                                                        </StringRHS>
                                                                                                      </Assignment>
                                                                                                    </NodeBody>
                                                                                                  </Node>
                                                                                                </NodeList>
                                                                                              </NodeBody>
                                                                                            </Node>
                                                                                          </NodeList>
                                                                                        </NodeBody>
                                                                                      </Node>
                                                                                    </NodeList>
                                                                                  </NodeBody>
                                                                                </Node>
                                                                              </NodeList>
                                                                            </NodeBody>
                                                                          </Node>
                                                                        </NodeList>
                                                                      </NodeBody>
                                                                    </Node>
                                                                  </NodeList>
                                                                </NodeBody>
                                                              </Node>
                                                            </NodeList>
                                                          </NodeBody>
                                                        </Node>
                                                      </NodeList>
                                                    </NodeBody>
                                                  </Node>
                                                </NodeList>
                                              </NodeBody>
                                            </Node>
                                          </NodeList>
                                        </NodeBody>
                                      </Node>
                                    </NodeList>
                                  </NodeBody>
                                </Node>
                              </NodeList>
                            </NodeBody>
                          </Node>
                          <Node NodeType="Assignment" >
                            <NodeId>SetPauseResult</NodeId>
                            <StartCondition>
                              <AND>
                                <EQInternal>
                                  <NodeStateVariable>
                                    <NodeId>GetAndProcessWaypoint</NodeId>
                                  </NodeStateVariable>
                                  <NodeStateValue>FINISHED</NodeStateValue>
                                </EQInternal>
                                <EQBoolean>
                                  <BooleanValue>1</BooleanValue>
                                  <BooleanVariable>is_paused</BooleanVariable>
                                </EQBoolean>
                              </AND>
                            </StartCondition>
                            <NodeBody>
                              <Assignment>
                                <IntegerVariable>cmd_return_val</IntegerVariable>
                                <NumericRHS>
                                  <IntegerValue>-3</IntegerValue>
                                </NumericRHS>
                              </Assignment>
                            </NodeBody>
                          </Node>
                          <Node NodeType="Update" >
                            <NodeId>SendUpdate</NodeId>
                            <StartCondition>
                              <OR>
                                <AND>
                                  <EQInternal>
                                    <NodeStateVariable>
                                      <NodeId>GetAndProcessWaypoint</NodeId>
                                    </NodeStateVariable>
                                    <NodeStateValue>FINISHED</NodeStateValue>
                                  </EQInternal>
                                  <EQBoolean>
                                    <BooleanValue>0</BooleanValue>
                                    <BooleanVariable>is_paused</BooleanVariable>
                                  </EQBoolean>
                                </AND>
                                <EQInternal>
                                  <NodeStateVariable>
                                    <NodeId>SetWaypointRequestFailed</NodeId>
                                  </NodeStateVariable>
                                  <NodeStateValue>FINISHED</NodeStateValue>
                                </EQInternal>
                                <EQInternal>
                                  <NodeStateVariable>
                                    <NodeId>SetPauseResult</NodeId>
                                  </NodeStateVariable>
                                  <NodeStateValue>FINISHED</NodeStateValue>
                                </EQInternal>
                              </OR>
                            </StartCondition>
                            <NodeBody>
                              <Update>
                                <Pair>
                                  <Name>taskId</Name>
                                  <IntegerVariable>waypt_id</IntegerVariable>
                                </Pair>
                                <Pair>
                                  <Name>result</Name>
                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                </Pair>
                                <Pair>
                                  <Name>commandName</Name>
                                  <StringVariable>cmd_name</StringVariable>
                                </Pair>
                              </Update>
                            </NodeBody>
                          </Node>
                          <Node NodeType="NodeList" >
                            <NodeId>CheckIfAbortPlan</NodeId>
                            <StartCondition>
                              <EQInternal>
                                <NodeStateVariable>
                                  <NodeId>SendUpdate</NodeId>
                                </NodeStateVariable>
                                <NodeStateValue>FINISHED</NodeStateValue>
                              </EQInternal>
                            </StartCondition>
                            <NodeBody>
                              <NodeList>
                                <Node NodeType="NodeList" >
                                  <NodeId>plexilisp_If_13</NodeId>
                                  <VariableDeclarations>
                                    <DeclareVariable>
                                      <Name>test</Name>
                                      <Type>Boolean</Type>
                                    </DeclareVariable>
                                  </VariableDeclarations>
                                  <NodeBody>
                                    <NodeList>
                                      <Node NodeType="Assignment" >
                                        <NodeId>plexilisp_IfSetup_15</NodeId>
                                        <NodeBody>
                                          <Assignment>
                                            <BooleanVariable>test</BooleanVariable>
                                            <BooleanRHS>
                                              <OR>
                                                <EQNumeric>
                                                  <IntegerValue>-1</IntegerValue>
                                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                                </EQNumeric>
                                                <EQNumeric>
                                                  <IntegerValue>1</IntegerValue>
                                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                                </EQNumeric>
                                                <EQNumeric>
                                                  <IntegerValue>4</IntegerValue>
                                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                                </EQNumeric>
                                                <EQNumeric>
                                                  <IntegerValue>5</IntegerValue>
                                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                                </EQNumeric>
                                                <EQNumeric>
                                                  <IntegerValue>6</IntegerValue>
                                                  <IntegerVariable>cmd_return_val</IntegerVariable>
                                                </EQNumeric>
                                              </OR>
                                            </BooleanRHS>
                                          </Assignment>
                                        </NodeBody>
                                      </Node>
                                      <Node NodeType="NodeList" >
                                        <NodeId>plexilisp_IfBody_14</NodeId>
                                        <StartCondition>
                                          <EQInternal>
                                            <NodeStateVariable>
                                              <NodeId>plexilisp_IfSetup_15</NodeId>
                                            </NodeStateVariable>
                                            <NodeStateValue>FINISHED</NodeStateValue>
                                          </EQInternal>
                                        </StartCondition>
                                        <EndCondition>
                                          <OR>
                                            <NOT>
                                              <BooleanVariable>test</BooleanVariable>
                                            </NOT>
                                            <EQInternal>
                                              <NodeStateVariable>
                                                <NodeId>plexilisp_IfTrueCase_16</NodeId>
                                              </NodeStateVariable>
                                              <NodeStateValue>FINISHED</NodeStateValue>
                                            </EQInternal>
                                          </OR>
                                        </EndCondition>
                                        <NodeBody>
                                          <NodeList>
                                            <Node NodeType="NodeList" >
                                              <NodeId>plexilisp_IfTrueCase_16</NodeId>
                                              <StartCondition>
                                                <BooleanVariable>test</BooleanVariable>
                                              </StartCondition>
                                              <NodeBody>
                                                <NodeList>
                                                  <Node NodeType="Assignment" >
                                                    <NodeId>SetAbort</NodeId>
                                                    <NodeBody>
                                                      <Assignment>
                                                        <BooleanVariable>abort_due_to_exception</BooleanVariable>
                                                        <BooleanRHS>
                                                          <BooleanValue>1</BooleanValue>
                                                        </BooleanRHS>
                                                      </Assignment>
                                                    </NodeBody>
                                                  </Node>
                                                </NodeList>
                                              </NodeBody>
                                            </Node>
                                          </NodeList>
                                        </NodeBody>
                                      </Node>
                                    </NodeList>
                                  </NodeBody>
                                </Node>
                              </NodeList>
                            </NodeBody>
                          </Node>
                        </NodeList>
                      </NodeBody>
                    </Node>
                  </NodeList>
                </NodeBody>
              </Node>
              <Node NodeType="Assignment" >
                <NodeId>MonitorPauseSignal</NodeId>
                <StartCondition>
                  <NEBoolean>
                    <BooleanVariable>is_paused</BooleanVariable>
                    <LookupOnChange>
                      <Name>
                        <StringValue>plan_paused</StringValue>
                      </Name>
                    </LookupOnChange>
                  </NEBoolean>
                </StartCondition>
                <RepeatCondition>
                  <BooleanValue>1</BooleanValue>
                </RepeatCondition>
                <NodeBody>
                  <Assignment>
                    <BooleanVariable>is_paused</BooleanVariable>
                    <BooleanRHS>
                      <LookupNow>
                        <Name>
                          <StringValue>plan_paused</StringValue>
                        </Name>
                      </LookupNow>
                    </BooleanRHS>
                  </Assignment>
                </NodeBody>
              </Node>
            </NodeList>
          </NodeBody>
        </Node>
        <Node NodeType="Update" >
          <NodeId>SignalEndOfPlan</NodeId>
          <StartCondition>
            <AND>
              <EQInternal>
                <NodeStateVariable>
                  <NodeId>SiteSurveyWrapper</NodeId>
                </NodeStateVariable>
                <NodeStateValue>FINISHED</NodeStateValue>
              </EQInternal>
              <EQInternal>
                <NodeStateVariable>
                  <NodeId>MonitorAbortSignal</NodeId>
                </NodeStateVariable>
                <NodeStateValue>WAITING</NodeStateValue>
              </EQInternal>
            </AND>
          </StartCondition>
          <NodeBody>
            <Update>
              <Pair>
                <Name>endOfPlan</Name>
                <BooleanValue>1</BooleanValue>
              </Pair>
            </Update>
          </NodeBody>
        </Node>
        <Node NodeType="Assignment" >
          <NodeId>MonitorAbortSignal</NodeId>
          <StartCondition>
            <EQBoolean>
              <BooleanValue>1</BooleanValue>
              <LookupOnChange>
                <Name>
                  <StringValue>abort_plan</StringValue>
                </Name>
              </LookupOnChange>
            </EQBoolean>
          </StartCondition>
          <NodeBody>
            <Assignment>
              <BooleanVariable>is_aborted</BooleanVariable>
              <BooleanRHS>
                <BooleanValue>1</BooleanValue>
              </BooleanRHS>
            </Assignment>
          </NodeBody>
        </Node>
        <Node NodeType="Update" >
          <NodeId>SendAbortUpdate</NodeId>
          <StartCondition>
            <EQInternal>
              <NodeStateVariable>
                <NodeId>MonitorAbortSignal</NodeId>
              </NodeStateVariable>
              <NodeStateValue>FINISHED</NodeStateValue>
            </EQInternal>
          </StartCondition>
          <NodeBody>
            <Update>
              <Pair>
                <Name>taskId</Name>
                <IntegerVariable>waypt_id</IntegerVariable>
              </Pair>
              <Pair>
                <Name>result</Name>
                <IntegerValue>-2</IntegerValue>
              </Pair>
            </Update>
          </NodeBody>
        </Node>
      </NodeList>
    </NodeBody>
  </Node>
</PlexilPlan>
