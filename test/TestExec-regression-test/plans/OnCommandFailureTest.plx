<?xml version="1.0" encoding="UTF-8"?><PlexilPlan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" FileName="plans/OnCommandFailureTest.ple"><GlobalDeclarations ColNo="7" LineNo="4"><CommandDeclaration ColNo="7" LineNo="4"><Name>ReceiveCommand</Name><Return><Name>_return_0</Name><Type>String</Type></Return><Parameter><Name>commandName</Name><Type>String</Type></Parameter></CommandDeclaration><CommandDeclaration ColNo="0" LineNo="10"><Name>SendReturnValue</Name><Parameter><Name>commandId</Name><Type>String</Type></Parameter><Parameter><Name>val</Name><Type>Any</Type></Parameter></CommandDeclaration><CommandDeclaration ColNo="0" LineNo="12"><Name>pprint</Name><AnyParameters/></CommandDeclaration></GlobalDeclarations><Node NodeType="NodeList" epx="Sequence" ColNo="0" LineNo="15"><NodeId>OnCommandFailureTest</NodeId><VariableDeclarations><DeclareVariable ColNo="2" LineNo="17"><Name>finished</Name><Type>Boolean</Type><InitialValue><BooleanValue>false</BooleanValue></InitialValue></DeclareVariable></VariableDeclarations><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><NodeBody><NodeList><Node NodeType="NodeList" epx="Concurrence" ColNo="2" LineNo="19"><NodeId>Concurrence__0</NodeId><EndCondition ColNo="4" LineNo="20"><BooleanVariable>finished</BooleanVariable></EndCondition><PostCondition ColNo="4" LineNo="21"><NoChildFailed ColNo="18" LineNo="21"><NodeRef dir="self"/></NoChildFailed></PostCondition><NodeBody><NodeList><Node ColNo="4" LineNo="23" NodeType="NodeList" epx="OnCommand"><NodeId>OnCommand__1</NodeId><VariableDeclarations><DeclareVariable><Name>ep2cp_hdl</Name><Type>String</Type></DeclareVariable></VariableDeclarations><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><NodeBody><NodeList><Node NodeType="Command" epx="OnCommand-command-wait"><NodeId generated="1">ep2cp_CmdWait</NodeId><EndCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><StringVariable>ep2cp_hdl</StringVariable><Name><StringValue>ReceiveCommand</StringValue></Name><Arguments><StringValue>Quit</StringValue></Arguments></Command></NodeBody></Node><Node ColNo="21" LineNo="23" NodeType="NodeList" epx="OnCommand-action"><NodeId>BLOCK__2</NodeId><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><StartCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></StartCondition><NodeBody><NodeList><Node ColNo="6" LineNo="24" NodeType="Command"><NodeId>COMMAND__3</NodeId><NodeBody><Command ColNo="6" LineNo="24"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="13" LineNo="24"><StringValue>OnCommandFailureTest exiting on Quit command</StringValue></Arguments></Command></NodeBody></Node><Node ColNo="6" LineNo="25" NodeType="Assignment"><NodeId>ASSIGNMENT__4</NodeId><StartCondition><Finished><NodeRef dir="sibling">COMMAND__3</NodeRef></Finished></StartCondition><NodeBody><Assignment ColNo="6" LineNo="25"><BooleanVariable>finished</BooleanVariable><BooleanRHS><BooleanValue>true</BooleanValue></BooleanRHS></Assignment></NodeBody></Node></NodeList></NodeBody></Node><Node NodeType="Command" epx="OnCommand-return"><NodeId generated="1">ep2cp_OnCommandReturn_Quit</NodeId><StartCondition><Finished><NodeRef dir="sibling">BLOCK__2</NodeRef></Finished></StartCondition><NodeBody><Command><Name><StringValue>SendReturnValue</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><BooleanValue>true</BooleanValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node><Node NodeType="NodeList" epx="Concurrence" ColNo="4" LineNo="28"><NodeId>Concurrence__5</NodeId><ExitCondition ColNo="6" LineNo="29"><BooleanVariable>finished</BooleanVariable></ExitCondition><NodeBody><NodeList><Node NodeType="NodeList" epx="While" ColNo="6" LineNo="31"><NodeId>while__6</NodeId><RepeatCondition><Succeeded><NodeRef dir="child">ep2cp_WhileTest</NodeRef></Succeeded></RepeatCondition><NodeBody><NodeList><Node NodeType="Empty" epx="Condition"><NodeId generated="1">ep2cp_WhileTest</NodeId><PostCondition><NOT ColNo="13" LineNo="31"><BooleanVariable>finished</BooleanVariable></NOT></PostCondition></Node><Node NodeType="NodeList" epx="Action" ColNo="8" LineNo="35"><NodeId>Concurrence__7</NodeId><PostCondition ColNo="10" LineNo="36"><OR ColNo="12" LineNo="37"><Succeeded ColNo="24" LineNo="36"><NodeRef dir="child">SimpleOnCommand</NodeRef></Succeeded><AND><Finished><NodeRef dir="child">SimpleOnCommand</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="child">SimpleOnCommand</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></OR></PostCondition><StartCondition><Succeeded><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></Succeeded></StartCondition><SkipCondition><PostconditionFailed><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></PostconditionFailed></SkipCondition><NodeBody><NodeList><Node ColNo="8" LineNo="39" NodeType="NodeList" epx="OnCommand"><NodeId>SimpleOnCommand</NodeId><VariableDeclarations><DeclareVariable><Name>ep2cp_hdl</Name><Type>String</Type></DeclareVariable></VariableDeclarations><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><NodeBody><NodeList><Node NodeType="Command" epx="OnCommand-command-wait"><NodeId generated="1">ep2cp_CmdWait</NodeId><EndCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><StringVariable>ep2cp_hdl</StringVariable><Name><StringValue>ReceiveCommand</StringValue></Name><Arguments><StringValue>Foo</StringValue></Arguments></Command></NodeBody></Node><Node ColNo="12" LineNo="41" NodeType="Command" epx="OnCommand-action"><NodeId>COMMAND__8</NodeId><StartCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></StartCondition><NodeBody><Command ColNo="12" LineNo="41"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="41"><StringValue>Foo!</StringValue></Arguments></Command></NodeBody></Node><Node NodeType="Command" epx="OnCommand-return"><NodeId generated="1">ep2cp_OnCommandReturn_Foo</NodeId><StartCondition><Finished><NodeRef dir="sibling">COMMAND__8</NodeRef></Finished></StartCondition><NodeBody><Command><Name><StringValue>SendReturnValue</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><BooleanValue>true</BooleanValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node><Node ColNo="10" LineNo="43" NodeType="Command"><NodeId>BLOCK__9</NodeId><StartCondition ColNo="12" LineNo="44"><AND><Finished><NodeRef dir="sibling">SimpleOnCommand</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="sibling">SimpleOnCommand</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></StartCondition><SkipCondition ColNo="12" LineNo="45"><Succeeded ColNo="26" LineNo="45"><NodeRef dir="sibling">SimpleOnCommand</NodeRef></Succeeded></SkipCondition><NodeBody><Command ColNo="12" LineNo="46"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="46"><StringValue>SimpleOnCommand failed</StringValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node></NodeList></NodeBody></Node><Node NodeType="NodeList" epx="While" ColNo="6" LineNo="50"><NodeId>while__11</NodeId><RepeatCondition><Succeeded><NodeRef dir="child">ep2cp_WhileTest</NodeRef></Succeeded></RepeatCondition><NodeBody><NodeList><Node NodeType="Empty" epx="Condition"><NodeId generated="1">ep2cp_WhileTest</NodeId><PostCondition><NOT ColNo="13" LineNo="50"><BooleanVariable>finished</BooleanVariable></NOT></PostCondition></Node><Node NodeType="NodeList" epx="Action" ColNo="8" LineNo="51"><NodeId>Concurrence__12</NodeId><PostCondition ColNo="10" LineNo="52"><OR ColNo="12" LineNo="53"><Succeeded ColNo="24" LineNo="52"><NodeRef dir="child">OnCommandWithParams</NodeRef></Succeeded><AND><Finished><NodeRef dir="child">OnCommandWithParams</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="child">OnCommandWithParams</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></OR></PostCondition><StartCondition><Succeeded><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></Succeeded></StartCondition><SkipCondition><PostconditionFailed><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></PostconditionFailed></SkipCondition><NodeBody><NodeList><Node ColNo="8" LineNo="55" NodeType="NodeList" epx="OnCommand"><NodeId>OnCommandWithParams</NodeId><VariableDeclarations><DeclareVariable ColNo="27" LineNo="56"><Name>a</Name><Type>String</Type></DeclareVariable><DeclareVariable><Name>ep2cp_hdl</Name><Type>String</Type></DeclareVariable></VariableDeclarations><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><NodeBody><NodeList><Node NodeType="Command" epx="OnCommand-command-wait"><NodeId generated="1">ep2cp_CmdWait</NodeId><EndCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><StringVariable>ep2cp_hdl</StringVariable><Name><StringValue>ReceiveCommand</StringValue></Name><Arguments><StringValue>Bar</StringValue></Arguments></Command></NodeBody></Node><Node NodeType="Command" epx="OnCommand-get-param"><NodeId generated="1">ep2cp_CmdGetParam_0</NodeId><StartCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></StartCondition><EndCondition><IsKnown><StringVariable>a</StringVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><StringVariable>a</StringVariable><Name><StringValue>GetParameter</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><IntegerValue>0</IntegerValue></Arguments></Command></NodeBody></Node><Node ColNo="12" LineNo="57" NodeType="Command" epx="OnCommand-action"><NodeId>COMMAND__13</NodeId><StartCondition><Succeeded><NodeRef dir="sibling">ep2cp_CmdGetParam_0</NodeRef></Succeeded></StartCondition><NodeBody><Command ColNo="12" LineNo="57"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="57"><StringValue>Bar</StringValue><StringVariable>a</StringVariable></Arguments></Command></NodeBody></Node><Node NodeType="Command" epx="OnCommand-return"><NodeId generated="1">ep2cp_OnCommandReturn_Bar</NodeId><StartCondition><Finished><NodeRef dir="sibling">COMMAND__13</NodeRef></Finished></StartCondition><NodeBody><Command><Name><StringValue>SendReturnValue</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><BooleanValue>true</BooleanValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node><Node ColNo="10" LineNo="59" NodeType="Command"><NodeId>BLOCK__14</NodeId><StartCondition ColNo="12" LineNo="60"><AND><Finished><NodeRef dir="sibling">OnCommandWithParams</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="sibling">OnCommandWithParams</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></StartCondition><SkipCondition ColNo="12" LineNo="61"><Succeeded ColNo="26" LineNo="61"><NodeRef dir="sibling">OnCommandWithParams</NodeRef></Succeeded></SkipCondition><NodeBody><Command ColNo="12" LineNo="62"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="62"><StringValue>OnCommandWithParams failed</StringValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node></NodeList></NodeBody></Node><Node NodeType="NodeList" epx="While" ColNo="6" LineNo="66"><NodeId>while__16</NodeId><RepeatCondition><Succeeded><NodeRef dir="child">ep2cp_WhileTest</NodeRef></Succeeded></RepeatCondition><NodeBody><NodeList><Node NodeType="Empty" epx="Condition"><NodeId generated="1">ep2cp_WhileTest</NodeId><PostCondition><NOT ColNo="13" LineNo="66"><BooleanVariable>finished</BooleanVariable></NOT></PostCondition></Node><Node NodeType="NodeList" epx="Action" ColNo="8" LineNo="67"><NodeId>Concurrence__17</NodeId><PostCondition ColNo="10" LineNo="68"><OR ColNo="12" LineNo="69"><Succeeded ColNo="24" LineNo="68"><NodeRef dir="child">OnCommandWithParamFailure</NodeRef></Succeeded><AND><Finished><NodeRef dir="child">OnCommandWithParamFailure</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="child">OnCommandWithParamFailure</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></OR></PostCondition><StartCondition><Succeeded><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></Succeeded></StartCondition><SkipCondition><PostconditionFailed><NodeRef dir="sibling">ep2cp_WhileTest</NodeRef></PostconditionFailed></SkipCondition><NodeBody><NodeList><Node ColNo="8" LineNo="71" NodeType="NodeList" epx="OnCommand"><NodeId>OnCommandWithParamFailure</NodeId><VariableDeclarations><DeclareVariable ColNo="27" LineNo="72"><Name>b</Name><Type>Integer</Type></DeclareVariable><DeclareVariable><Name>ep2cp_hdl</Name><Type>String</Type></DeclareVariable></VariableDeclarations><InvariantCondition><NoChildFailed><NodeRef dir="self"/></NoChildFailed></InvariantCondition><NodeBody><NodeList><Node NodeType="Command" epx="OnCommand-command-wait"><NodeId generated="1">ep2cp_CmdWait</NodeId><EndCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><StringVariable>ep2cp_hdl</StringVariable><Name><StringValue>ReceiveCommand</StringValue></Name><Arguments><StringValue>Baz</StringValue></Arguments></Command></NodeBody></Node><Node NodeType="Command" epx="OnCommand-get-param"><NodeId generated="1">ep2cp_CmdGetParam_0</NodeId><StartCondition><IsKnown><StringVariable>ep2cp_hdl</StringVariable></IsKnown></StartCondition><EndCondition><IsKnown><IntegerVariable>b</IntegerVariable></IsKnown></EndCondition><PostCondition><EQInternal><NodeCommandHandleVariable><NodeRef dir="self"/></NodeCommandHandleVariable><NodeCommandHandleValue>COMMAND_SUCCESS</NodeCommandHandleValue></EQInternal></PostCondition><NodeBody><Command><IntegerVariable>b</IntegerVariable><Name><StringValue>GetParameter</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><IntegerValue>0</IntegerValue></Arguments></Command></NodeBody></Node><Node ColNo="12" LineNo="73" NodeType="Command" epx="OnCommand-action"><NodeId>COMMAND__18</NodeId><StartCondition><Succeeded><NodeRef dir="sibling">ep2cp_CmdGetParam_0</NodeRef></Succeeded></StartCondition><NodeBody><Command ColNo="12" LineNo="73"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="73"><StringValue>Baz</StringValue><IntegerVariable>b</IntegerVariable></Arguments></Command></NodeBody></Node><Node NodeType="Command" epx="OnCommand-return"><NodeId generated="1">ep2cp_OnCommandReturn_Baz</NodeId><StartCondition><Finished><NodeRef dir="sibling">COMMAND__18</NodeRef></Finished></StartCondition><NodeBody><Command><Name><StringValue>SendReturnValue</StringValue></Name><Arguments><StringVariable>ep2cp_hdl</StringVariable><BooleanValue>true</BooleanValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node><Node ColNo="10" LineNo="75" NodeType="Command"><NodeId>BLOCK__19</NodeId><StartCondition ColNo="12" LineNo="76"><AND><Finished><NodeRef dir="sibling">OnCommandWithParamFailure</NodeRef></Finished><EQInternal><NodeFailureVariable><NodeRef dir="sibling">OnCommandWithParamFailure</NodeRef></NodeFailureVariable><NodeFailureValue>INVARIANT_CONDITION_FAILED</NodeFailureValue></EQInternal></AND></StartCondition><SkipCondition ColNo="12" LineNo="77"><Succeeded ColNo="26" LineNo="77"><NodeRef dir="sibling">OnCommandWithParamFailure</NodeRef></Succeeded></SkipCondition><NodeBody><Command ColNo="12" LineNo="78"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="19" LineNo="78"><StringValue>OnCommandWithParamFailure failed</StringValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node></NodeList></NodeBody></Node></NodeList></NodeBody></Node></NodeList></NodeBody></Node><Node ColNo="2" LineNo="84" NodeType="Command"><NodeId>COMMAND__21</NodeId><StartCondition><Finished><NodeRef dir="sibling">Concurrence__0</NodeRef></Finished></StartCondition><NodeBody><Command ColNo="2" LineNo="84"><Name><StringValue>pprint</StringValue></Name><Arguments ColNo="9" LineNo="84"><StringValue>OnCommandFailureTest complete</StringValue></Arguments></Command></NodeBody></Node></NodeList></NodeBody></Node></PlexilPlan>