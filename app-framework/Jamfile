
SubDir app-framework ;

if ! $(PLEXIL_APP_FWORK_READY) {

PLEXIL_HOME = [ FDirName $(app-framework) $(DOTDOT) ] ;

# reference common library directories
# *** unfortunately the references to relative paths only work
# when executing in this directory!! ***
LINKFLAGS += [ FLibDirFlags [ FDirName $(PLEXIL_HOME) universal-exec lib ] ]
             [ FLibDirFlags [ FDirName $(PLEXIL_HOME) interfaces lib ] ]
             ;

# point to relevant UE headers
HDRS += [ FDirName $(PLEXIL_HOME) universal-exec Exec ]
        [ FDirName $(PLEXIL_HOME) universal-exec Exec base ]
        [ FDirName $(PLEXIL_HOME) universal-exec Exec component ]
        [ FDirName $(PLEXIL_HOME) universal-exec TinyXml base ]
        [ FDirName $(PLEXIL_HOME) universal-exec Utils ]
        [ FDirName $(PLEXIL_HOME) universal-exec Utils base ]
        [ FDirName $(PLEXIL_HOME) universal-exec Utils component ]
        [ FDirName $(PLEXIL_HOME) interfaces Sockets base ]
        ;

Module PlexilAppFramework ;

ModuleLibraries PlexilAppFramework : 
  $(PTHREADS_LIBRARY)
  $(SEM_LIBRARY)
  [ FVariantName Exec PlexilUtils PlexilTinyXml : $(VARIANTS) ]
  [ FVariantName Sockets : $(VARIANTS) ]
 ;

ModuleCore PlexilAppFramework :
  ThreadSemaphore.cc
  InterfaceSchema.cc
  AdapterExecInterface.cc
  InterfaceAdapter.cc
  ManagedExecListener.cc
  InterfaceManager.cc
  AdapterFactory.cc
  ExecListenerFactory.cc
  ExecApplication.cc
 ;

ModuleComponent PlexilAppFramework :
  DummyAdapter.cc  
  NewLuvListener.cc
 ;

SubInclude app-framework test ; 

} # PLEXIL_APP_FWORK_READY
