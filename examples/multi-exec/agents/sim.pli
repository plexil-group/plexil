;; File: $SVNROOT/examples/multi-exec/agents/sim.pli

(plexil-plan
  (concurrently "sim"
    (declarations
      (library-node-declaration "get-state"))
    (variables
      (string "name" "sim")
      (real "lat" 0.0)
      (real "lon" 0.0)
      (integer "alt" 0)
      (boolean "debug" true))
    (invariant-condition (not (finished "QuitCommand")))
    (action "handle-state-request"
      (repeat-condition true)
      (library-call-node "get-state"
        (call "get-state" (alias "name" (stringvar "name")) (alias "debug" (boolvar "debug")))))
    (action "QuitCommand"
      (on-message "Quit"
        (command "print" "[" (stringvar "name") "] recv: Quit (quitting)\n\n")))))

;; EOF
