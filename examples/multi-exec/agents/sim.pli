;; File: $SVNROOT/examples/multi-exec/agents/sim.pli

(plexil-plan
  (concurrently "Interface"
    (variables (integer "x" 1))
    (invariant-condition (not (finished "QuitCommand")))
    (action "MoveRightCommand"
      (repeat-condition true)
      (on-command "MoveRight" ((integer "modX"))
                  (sequence "RecMoveRight"
                    (action "Increment"
                      (assignment (intvar "x") (+ (intvar "x") (intvar "modX"))))
                    (action "SetExt"
                      (command "UpdateLookup" "x" (intvar "x")))
                    (action "RespondMoveRight"
                      (command "SendReturnValue" (intvar "x"))))))
    (action "TestCommand"
      (repeat-condition true)
      (on-command "TestCommand" ((integer "int"))
                  (concurrently "Dispatch"
                    (action "One"
                      (skip-condition (!= (intvar "int") 1))
                      (command "SendReturnValue" "one"))
                    (action "Two"
                      (skip-condition (!= (intvar "int") 2))
                      (command "SendReturnValue" "two")))))
    (action "QuitCommand"
      (on-message "Quit"))))

;; EOF
