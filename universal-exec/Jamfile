# this jamfile courtesy (more or less) of EUROPA2
SubDir universal-exec ;

if ! $(PLEXIL_READY) {

if SHARED in $(LIBRARIES) { 
  if PROFILE in $(VARIANTS) {
    Exit Cannot build PROFILE and SHARED ;
  }
  if CUSTOM in $(VARIANTS) && $(PROFILE) {
    Exit Cannot build PROFILE and SHARED ;
  }
}

# This makes sure executables link correctly on Mac OS X
LINKFLAGS += [ FLibDirFlags [ FDirName $($(_top)) lib ] ] ;

Depends plexil-exec-all : all ;

Module plexil-exec : all  ; #used to have system here

Depends run-tests : tests ;

Depends run-all-tests : run-checkin-tests ; #at some point, these may diverge
#Depends run-all-tests : run-all-module-tests ; 

Depends run-checkin-tests : check-svn-changes ;
Depends run-checkin-tests : run-tests ;

# install tests designed for off site customers to check system is installed without svn update
Depends run-install-tests : run-tests ;

NOCARE run-all-tests run-tests run-checkin-tests tests ;

SubInclude universal-exec TinyXml ;
SubInclude universal-exec Utils ;
SubInclude universal-exec Exec ;

RemoveBinaries clean-all ;
#Depends clean-all : clean clean-nddl-xml clean-system-xml ;

ExecuteSO check-svn-changes : checksvn : $(universal-exec) ;


} # PLEXIL_READY
